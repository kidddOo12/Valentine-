<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Level 2 üíò</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    background: radial-gradient(circle at top,#2a0a16,#12040c 80%);
    color: white;
    text-align: center;
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
}

h1 {
    margin-top: 15px;
    font-family: 'Playfair Display', serif;
    font-size: 28px;
}

#score {
    font-size: 20px;
    margin: 8px;
}

.love-meter {
    width: 80%;
    height: 18px;
    border: 2px solid #ff85a2;
    margin: 10px auto;
    border-radius: 12px;
    overflow: hidden;
}

.love-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg,#ff4d6d,#ff85a2);
    transition: width 0.3s ease;
}

.heart {
    position: absolute;
    font-size: 32px;
    cursor: pointer;
}

/* Explosion particles */
.particle {
  position:absolute;
  font-size:20px;
  animation:explode 0.8s ease-out forwards;
}
@keyframes explode {
  to{opacity:0;transform:translate(var(--x),var(--y)) scale(0.3);}
}

/* Reward Screen */
.reward-screen{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.9);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 1s ease;
}
.reward-screen.show{
  opacity:1;
  pointer-events:auto;
}
.reward-screen h2{
  font-size:28px;
  margin-bottom:8px;
}
.reward-screen p{
  font-size:18px;
  margin-bottom:14px;
}
.reward-screen button{
  padding:12px 22px;
  border:none;
  border-radius:30px;
  background:#ff4d6d;
  color:white;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>Level 2: Catch the Love üíñ</h1>
<div id="score">Hearts: 0 / 10</div>

<div class="love-meter">
  <div class="love-fill" id="loveFill"></div>
</div>

<!-- Reward -->
<div class="reward-screen" id="rewardScreen">
  <h2>üíù You filled the love meter!</h2>
  <p>Close to the next big moment‚Ä¶</p>
  <button onclick="goNext()">Continue üíç</button>
</div>

<script>
let count = 0;
const total = 10;
const scoreEl = document.getElementById("score");
const loveFill = document.getElementById("loveFill");
const rewardScreen = document.getElementById("rewardScreen");

// Spawn heart
function spawn(){
  const h = document.createElement("div");
  h.className = "heart";
  h.textContent = "üíñ";
  h.style.left = Math.random() * 90 + "vw";
  h.style.top = "-30px";
  document.body.appendChild(h);

  const fall = setInterval(()=>{
    let y = parseInt(h.style.top);
    h.style.top = (y + 2) + "px";
    if(y > window.innerHeight){
      clearInterval(fall);
      h.remove();
    }
  }, 30);

  h.onclick = () => {
    createExplosion(h);
    count++;
    h.remove();
    updateScore();
    if(count >= total) showReward();
  }
}

// Explosion on tap
function createExplosion(el){
  const rect = el.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;

  for(let i=0;i<8;i++){
    const p = document.createElement("div");
    p.className = "particle";
    p.textContent = "üíñ";

    const angle = Math.random() * 2 * Math.PI;
    const dist = Math.random() * 50 + 20;
    const x = Math.cos(angle)*dist + "px";
    const y = Math.sin(angle)*dist + "px";

    p.style.left = cx + "px";
    p.style.top = cy + "px";
    p.style.setProperty("--x",x);
    p.style.setProperty("--y",y);

    document.body.appendChild(p);
    setTimeout(()=>p.remove(),800);
  }
}

function updateScore(){
  scoreEl.textContent = "Hearts: " + count + " / " + total;
  loveFill.style.width = ((count/total)*100) + "%";
}

function showReward(){
  rewardScreen.classList.add("show");
}

// Go next
function goNext(){
  window.location = "propose.html";
}

setInterval(spawn,900);
</script>

</body>
</html>
